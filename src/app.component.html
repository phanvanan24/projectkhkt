
<div class="min-h-screen light-mesh flex flex-col font-sans relative selection:bg-indigo-100 selection:text-indigo-700">
  
  <div class="fixed top-6 left-1/2 -translate-x-1/2 z-50 w-[95%] sm:w-[90%] max-w-5xl">
    <nav class="glass-nav rounded-full px-2 py-2 flex justify-between items-center shadow-lg shadow-black/5 transition-all duration-300 hover:shadow-black/10">
      
      <a routerLink="/" class="flex items-center gap-2 px-4 py-1.5 hover:bg-black/5 rounded-full transition-colors group">
        <img src="https://i.imgur.com/L3r4xU0.png" alt="Logo" class="w-8 h-8 object-contain group-hover:scale-110 transition-transform">
        <span class="font-bold text-slate-800 tracking-tight hidden sm:block">LimVA</span>
      </a>

      <div class="flex items-center gap-1 overflow-x-auto no-scrollbar mx-2">
        <a routerLink="/" routerLinkActive="bg-white text-indigo-600 shadow-sm font-semibold" [routerLinkActiveOptions]="{exact: true}" class="px-3 sm:px-4 py-2 rounded-full text-sm text-slate-500 hover:text-slate-900 transition-all whitespace-nowrap">Trang chủ</a>
        <a routerLink="/grader" routerLinkActive="bg-white text-indigo-600 shadow-sm font-semibold" class="px-3 sm:px-4 py-2 rounded-full text-sm text-slate-500 hover:text-slate-900 transition-all whitespace-nowrap">Chấm bài</a>
        <a routerLink="/exam" routerLinkActive="bg-white text-indigo-600 shadow-sm font-semibold" class="px-3 sm:px-4 py-2 rounded-full text-sm text-slate-500 hover:text-slate-900 transition-all whitespace-nowrap">Sinh đề</a>
        <a routerLink="/mock-exam" routerLinkActive="bg-white text-indigo-600 shadow-sm font-semibold" class="px-3 sm:px-4 py-2 rounded-full text-sm text-slate-500 hover:text-slate-900 transition-all whitespace-nowrap">Thi thử</a>
        <a routerLink="/utils" routerLinkActive="bg-white text-indigo-600 shadow-sm font-semibold" class="hidden sm:block px-3 sm:px-4 py-2 rounded-full text-sm text-slate-500 hover:text-slate-900 transition-all whitespace-nowrap">Tiện ích</a>
        
        @if (authService.laAdmin()) {
           <a routerLink="/admin" routerLinkActive="bg-slate-900 text-white shadow-sm font-semibold hover:text-white" class="px-3 sm:px-4 py-2 rounded-full text-sm text-red-600 font-bold hover:text-red-700 transition-all whitespace-nowrap flex items-center gap-1">
             <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
             Quản lý
           </a>
        }

        <a routerLink="/terms" routerLinkActive="bg-white text-indigo-600 shadow-sm font-semibold" class="hidden lg:block px-3 sm:px-4 py-2 rounded-full text-sm text-slate-500 hover:text-slate-900 transition-all whitespace-nowrap">Điều khoản</a>
      </div>
      
      <div class="pr-2 pl-2 border-l border-slate-200">
        @if (authService.nguoiDungHienTai()) {
           <div class="relative">
            <button (click)="chuyenMenuNguoiDung()" class="flex items-center gap-2 px-2 py-1 rounded-full hover:bg-slate-100 transition-colors">
               <div class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-sm">
                {{ authService.nguoiDungHienTai()?.displayName?.charAt(0) || 'U' }}
               </div>
               <span class="hidden md:block text-sm font-semibold text-slate-700 max-w-[100px] truncate">
                {{ authService.nguoiDungHienTai()?.displayName || 'User' }}
               </span>
               <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
             </button>

           @if (menuNguoiDung()) {
               <div class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden animate-fade-in z-50">
                 <div class="p-3 border-b border-slate-50">
                    <p class="text-xs text-slate-400 font-medium">Tài khoản</p>
                    <p class="text-sm font-bold text-slate-800 truncate">{{ authService.nguoiDungHienTai()?.email }}</p>
                    @if (authService.laAdmin()) {
                      <span class="inline-block mt-1 px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-600">ADMINISTRATOR</span>
                    }
                 </div>
                 <button (click)="dangXuat()" class="w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 font-medium flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                    Đăng xuất
                 </button>
               </div>
             }
             
           @if (menuNguoiDung()) {
               <div class="fixed inset-0 z-40" (click)="menuNguoiDung.set(false)"></div>
             }
           </div>
        } @else {
          <button (click)="moDangNhap()" class="bg-slate-900 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-md hover:bg-slate-800 transition-all flex items-center gap-2 whitespace-nowrap">
             <span>Đăng nhập</span>
             <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path></svg>
           </button>
         }
      </div>
    </nav>
  </div>

  @if (authService.modalDangNhap()) {
    <app-login (close)="dongDangNhap()"></app-login>
  }

  <main class="flex-grow w-full pt-28 pb-12 px-4 sm:px-6">
    <router-outlet></router-outlet>
  </main>

  <footer class="bg-white border-t border-slate-200 pt-16 pb-8 mt-auto">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
        <div class="col-span-1 md:col-span-1">
          <a routerLink="/" class="flex items-center gap-2 mb-4">
            <img src="https://i.imgur.com/L3r4xU0.png" alt="Logo" class="w-8 h-8 object-contain">
            <span class="font-bold text-slate-800 text-xl tracking-tight">LimVA AI</span>
          </a>
          <p class="text-slate-500 text-sm leading-relaxed">
            Hệ thống tương tác và học tập thông minh dành cho học sinh Việt Nam.
          </p>
        </div>

        <div>
          <h4 class="font-bold text-slate-900 mb-4">Sản phẩm</h4>
          <ul class="space-y-2 text-sm text-slate-600">
            <li><a routerLink="/grader" class="hover:text-indigo-600 transition">Chấm bài</a></li>
            <li><a routerLink="/exam" class="hover:text-indigo-600 transition">Sinh đề thi</a></li>
            <li><a routerLink="/mock-exam" class="hover:text-indigo-600 transition">Thi thử Online</a></li>
            <li><a routerLink="/utils" class="hover:text-indigo-600 transition">Tiện ích</a></li>
          </ul>
        </div>

        <div>
          <h4 class="font-bold text-slate-900 mb-4">Hỗ trợ</h4>
          <ul class="space-y-2 text-sm text-slate-600">
            <li><a href="#" class="hover:text-indigo-600 transition">Câu hỏi thường gặp</a></li>
            <li><a routerLink="/terms" class="hover:text-indigo-600 transition">Điều khoản sử dụng</a></li>
          </ul>
        </div>

        <div>
          <h4 class="font-bold text-slate-900 mb-4">Liên hệ</h4>
          <ul class="space-y-2 text-sm text-slate-600">
             <li class="flex items-start gap-2">
                <span class="font-semibold text-slate-700 w-20">Họ và tên:</span> 
                <span>xxxx</span>
             </li>
             <li class="flex items-start gap-2">
                <span class="font-semibold text-slate-700 w-20">SĐT:</span> 
                <span>xxx</span>
             </li>
             <li class="flex items-start gap-2">
                <span class="font-semibold text-slate-700 w-20">Email:</span> 
                <a href="mailto:admin@limva.edu.vn" class="hover:text-indigo-600">admin@limva.edu.vn</a>
             </li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-slate-100 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
        <p class="text-slate-400 text-sm">© 2025 LimVA AI. Bản quyền hệ thống tương tác và học tập thông minh thuộc về Phan Văn An.</p>
        <div class="flex gap-6 text-sm text-slate-400">
          <a routerLink="/terms" class="hover:text-slate-600">Điều khoản</a>
          <a href="#" class="hover:text-slate-600">Bảo mật</a>
        </div>
      </div>
    </div>
  </footer>
</div>
